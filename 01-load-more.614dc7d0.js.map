{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,S,uCAKMC,EAAY,IAAI,E,WAAAC,eAEhBC,EAAO,CACXC,KAAMC,SAASC,cAAc,gBAC7BC,QAASF,SAASC,cAAc,YAChCE,YAAaH,SAASC,cAAc,eAGlCG,EAAiB,K,SAONC,I,OAAAA,EAAfC,EAAAZ,EAAA,CAAAY,EAAAC,GAAAC,MAAA,SAAAC,EAAgCC,G,IAuBxBC,EAHIC,EACKC,E,qEApBfH,EAAEI,iBAEFC,GAAmB,GAEnBC,IAEApB,EAAUqB,YAEVrB,EAAUsB,MAAQR,EAAES,OAAOC,SAASC,YAAYC,MAAMC,OAE9B,KAApB3B,EAAUsB,MAAY,C,sBACxBpB,EAAKC,KAAKyB,QAEVC,EAAiB,OAAQ,sC,oDASf7B,EAAU8B,Y,WAAhBf,EAA2BgB,EAAAC,KAH7BhB,EAGED,EAHFkB,KACAhB,EAEEF,EAFFmB,UAIe,IAFbnB,EADFoB,MAGgB,C,uBAChBN,EACE,UACA,4E,8BAKJA,EAAiB,UAAW,oBAAkCO,OAAdnB,EAAc,aAE9DoB,EAAYrB,GAEZR,EAAiB,IAAIE,EAAA4B,GAAJ,CAAmB,gBAEhCrB,EAAgBjB,EAAUuC,KAAOvC,EAAUwC,SAAO,C,uBACpDrB,GAAmB,GACnBU,EACE,OACA,8DAEFY,I,2BAIFtB,GAAmB,G,kDAEnBU,EACE,UACA,mD,2DArDyBa,MAAAC,KAAAC,U,UA0DhBC,I,OAAAA,EAAfnC,EAAAZ,EAAA,CAAAY,EAAAC,GAAAC,MAAA,SAAAC,I,IAKME,EADYC,EAAmBC,E,yEAHnCjB,EAAU8C,gB,kBAIA9C,EAAU8B,Y,OAAhBf,EAA2BgB,EAAAC,KADrBhB,EACND,EADMkB,KAAchB,EACpBF,EADoBmB,UAGtBG,EAAYrB,GAEZ+B,IAEAvC,EAAewC,UAEX/B,EAAgBjB,EAAUuC,KAAOvC,EAAUwC,UAC7CrB,GAAmB,GACnBU,EACE,OACA,8DAEFY,K,kDAGFZ,EACE,UACA,mD,2DAxB+Ba,MAAAC,KAAAC,U,CA6BrC,SAASP,EAAYY,GACnBA,EAAKC,KACH,SAAAC,G,IACEC,EAAYD,EAAZC,aACAC,EAAaF,EAAbE,cACAC,EAAIH,EAAJG,KACAC,EAAKJ,EAALI,MACAC,EAAKL,EAALK,MACAC,EAAQN,EAARM,SACAC,EAASP,EAATO,UAEAxD,EAAKI,QAAQqD,mBACX,YACA,sBAGgBvB,OAFLiB,EAAc,kEAEajB,OAAtBgB,EAAa,WAInBhB,OAJ4BkB,EAAK,4IAQjClB,OAJAmB,EAAM,6GAQNnB,OAJAoB,EAAM,gHAQNpB,OAJAqB,EAAS,iHAICrB,OAAVsB,EAAU,sF,IAW5B,SAASjB,IACPvC,EAAKI,QAAQqD,mBACX,YACC,kF,CAQL,SAASxC,EAAmByC,GAC1B1D,EAAKK,YAAYsD,MAAMC,QAAUF,EAAU,QAAU,M,CAGvD,SAASxC,IACPlB,EAAKI,QAAQyD,UAAY,E,CAG3B,SAASlC,EAAiBmC,EAAMC,GAC9B,OAAOvD,EAAAwD,GAASC,OAAOH,GAAMC,EAAS,CACpCG,SAAU,gBACVC,cAAc,G,CAIlB,SAAStB,IACP,IAAQuB,EACNpE,EAAKI,QAAQiE,kBAAkBC,wBADzBC,OAGRC,OAAOC,SAAS,CACdC,IAAkB,EAAbN,EACLO,SAAU,U,CAvKd3E,EAAKC,KAAK2E,iBAAiB,U,SAKKhE,G,OAAjBL,EAAgBiC,MAAAC,KAAAC,U,IAJ/B1C,EAAKK,YAAYuE,iBAAiB,S,kBA8DnBjC,EAAsBH,MAAAC,KAAAC,U,IA5DrCzB,GAAmB,E","sources":["src/js/01-load-more.js"],"sourcesContent":["import Notiflix from 'notiflix';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { ImagesService } from './services/get-images-service';\n\nconst ImagesApi = new ImagesService();\n\nconst refs = {\n  form: document.querySelector('#search-form'),\n  gallery: document.querySelector('.gallery'),\n  loadMoreBtn: document.querySelector('.load-more'),\n};\n\nlet simpleLightbox = null;\n\nrefs.form.addEventListener('submit', handleFormSubmit);\nrefs.loadMoreBtn.addEventListener('click', handleLoadMoreBtnClick);\n\nisLoadMoreBtnShown(false);\n\nasync function handleFormSubmit(e) {\n  e.preventDefault();\n\n  isLoadMoreBtnShown(false);\n\n  clearMarkup();\n\n  ImagesApi.pageReset();\n\n  ImagesApi.query = e.target.elements.searchQuery.value.trim();\n\n  if (ImagesApi.query === '') {\n    refs.form.reset();\n\n    showNotification('info', 'Please, enter your search request.');\n    return;\n  }\n\n  try {\n    const {\n      hits: images,\n      totalHits: totalQuantity,\n      total: quantity,\n    } = await ImagesApi.getImages();\n\n    if (quantity === 0) {\n      showNotification(\n        'failure',\n        'Sorry, there are no images matching your search query. Please try again.'\n      );\n      return;\n    }\n\n    showNotification('success', `Hooray! We found ${totalQuantity} images.`);\n\n    renderCards(images);\n\n    simpleLightbox = new SimpleLightbox('.gallery a');\n\n    if (totalQuantity < ImagesApi.page * ImagesApi.perPage) {\n      isLoadMoreBtnShown(false);\n      showNotification(\n        'info',\n        \"We're sorry, but you've reached the end of search results.\"\n      );\n      renderEndMessage();\n      return;\n    }\n\n    isLoadMoreBtnShown(true);\n  } catch {\n    showNotification(\n      'failure',\n      'Something went wrong... Please try again later.'\n    );\n  }\n}\n\nasync function handleLoadMoreBtnClick() {\n  ImagesApi.incrementPage();\n\n  try {\n    const { hits: images, totalHits: totalQuantity } =\n      await ImagesApi.getImages();\n\n    renderCards(images);\n\n    autoScrollPage();\n\n    simpleLightbox.refresh();\n\n    if (totalQuantity < ImagesApi.page * ImagesApi.perPage) {\n      isLoadMoreBtnShown(false);\n      showNotification(\n        'info',\n        \"We're sorry, but you've reached the end of search results.\"\n      );\n      renderEndMessage();\n    }\n  } catch {\n    showNotification(\n      'failure',\n      'Something went wrong... Please try again later.'\n    );\n  }\n}\n\nfunction renderCards(data) {\n  data.map(\n    ({\n      webformatURL,\n      largeImageURL,\n      tags,\n      likes,\n      views,\n      comments,\n      downloads,\n    }) => {\n      refs.gallery.insertAdjacentHTML(\n        'beforeend',\n        `\n        <a href=\"${largeImageURL}\">\n          <div class=\"photo-card\">\n            <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n            <div class=\"info\">\n              <p class=\"info-item\">\n                <b>Likes</b>\n                ${likes}\n              </p>\n              <p class=\"info-item\">\n                <b>Views</b>\n                ${views}\n              </p>\n              <p class=\"info-item\">\n                <b>Comments</b>\n                ${comments}\n              </p>\n              <p class=\"info-item\">\n                <b>Downloads</b>\n                ${downloads}\n              </p>\n            </div>\n          </div>\n        </a>\n        `\n      );\n    }\n  );\n}\n\nfunction renderEndMessage() {\n  refs.gallery.insertAdjacentHTML(\n    'beforeend',\n    `\n    <p class=\"end-message\">\n      The end of search results.\n    </p>\n    `\n  );\n}\n\nfunction isLoadMoreBtnShown(boolean) {\n  refs.loadMoreBtn.style.display = boolean ? 'block' : 'none';\n}\n\nfunction clearMarkup() {\n  refs.gallery.innerHTML = '';\n}\n\nfunction showNotification(type, message) {\n  return Notiflix.Notify[type](message, {\n    position: 'center-center',\n    clickToClose: true,\n  });\n}\n\nfunction autoScrollPage() {\n  const { height: cardHeight } =\n    refs.gallery.firstElementChild.getBoundingClientRect();\n\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n"],"names":["$bpxeT","parcelRequire","$c3ddedcda2f549ef$var$ImagesApi","ImagesService","$c3ddedcda2f549ef$var$refs","form","document","querySelector","gallery","loadMoreBtn","$c3ddedcda2f549ef$var$simpleLightbox","$c3ddedcda2f549ef$var$_handleFormSubmit","$parcel$interopDefault","$2TvXO","mark","_callee","e","ref","images","totalQuantity","preventDefault","$c3ddedcda2f549ef$var$isLoadMoreBtnShown","$c3ddedcda2f549ef$var$clearMarkup","pageReset","query","target","elements","searchQuery","value","trim","reset","$c3ddedcda2f549ef$var$showNotification","getImages","_ctx","sent","hits","totalHits","total","concat","$c3ddedcda2f549ef$var$renderCards","$5IjG7","page","perPage","$c3ddedcda2f549ef$var$renderEndMessage","apply","this","arguments","$c3ddedcda2f549ef$var$_handleLoadMoreBtnClick","incrementPage","$c3ddedcda2f549ef$var$autoScrollPage","refresh","data","map","param","webformatURL","largeImageURL","tags","likes","views","comments","downloads","insertAdjacentHTML","boolean","style","display","innerHTML","type","message","$6JpON","Notify","position","clickToClose","cardHeight","firstElementChild","getBoundingClientRect","height","window","scrollBy","top","behavior","addEventListener"],"version":3,"file":"01-load-more.614dc7d0.js.map"}